<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Apple-Style Weather UI</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      overflow: hidden;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: linear-gradient(135deg, #1e1e2f, #2a2a40);
      color: white;
    }
    #map {
      height: 100%;
      width: 100%;
      z-index: 1;
    }
    /* Hamburger button */
    .hamburger {
      position: absolute;
      bottom: 20px;
      left: 20px;
      width: 40px;
      height: 30px;
      cursor: pointer;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .hamburger span {
      display: block;
      height: 4px;
      background: rgba(255,255,255,0.9);
      border-radius: 2px;
      transition: 0.3s;
    }
    /* Menu panel */
    .menu {
      position: absolute;
      bottom: 70px;
      left: 20px;
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(15px);
      border-radius: 16px;
      padding: 12px;
      display: none;
      flex-direction: column;
      gap: 8px;
      z-index: 1000;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }
    .chip {
      padding: 6px 12px;
      border-radius: 12px;
      background: rgba(255,255,255,0.2);
      cursor: pointer;
      transition: background 0.3s;
    }
    .chip:hover {
      background: rgba(255,255,255,0.35);
    }
    /* Ambient particles canvas */
    #ambientParticles {
      position:absolute;
      top:0;
      left:0;
      width:100%;
      height:100%;
      pointer-events:none;
      z-index:2;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  
  <!-- Ambient Particles -->
  <canvas id="ambientParticles"></canvas>
  
  <!-- Hamburger Menu -->
  <div class="hamburger" id="hamburger">
    <span></span>
    <span></span>
    <span></span>
  </div>
  <div class="menu" id="menu">
    <div class="chip">Wind</div>
    <div class="chip">Precipitation</div>
    <div class="chip">Humidity</div>
  </div>
  
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    /* Initialize map */
    const map = L.map('map').setView([0, 0], 13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Â© OpenStreetMap contributors'
    }).addTo(map);

    /* Get location */
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(pos => {
        const lat = pos.coords.latitude;
        const lon = pos.coords.longitude;
        map.setView([lat, lon], 13);
        L.marker([lat, lon]).addTo(map).bindPopup("You are here").openPopup();
      });
    }

    /* Hamburger toggle */
    const hamburger = document.getElementById("hamburger");
    const menu = document.getElementById("menu");
    hamburger.addEventListener("click", () => {
      menu.style.display = menu.style.display === "flex" ? "none" : "flex";
    });

    /* Ambient particles */
    const ambientCanvas = document.getElementById("ambientParticles");
    const ambientCtx = ambientCanvas.getContext("2d");
    function resizeAmbientCanvas() {
      ambientCanvas.width = window.innerWidth;
      ambientCanvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resizeAmbientCanvas);
    resizeAmbientCanvas();

    class AmbientParticle {
      constructor() { this.reset(); }
      reset() {
        this.x = Math.random() * ambientCanvas.width;
        this.y = Math.random() * ambientCanvas.height;
        this.size = Math.random() * 2 + 1;
        this.speedX = (Math.random() - 0.5) * 0.2;
        this.speedY = (Math.random() - 0.5) * 0.2;
        this.alpha = 0;
        this.fadeIn = true;
      }
      update() {
        this.x += this.speedX;
        this.y += this.speedY;
        if (this.fadeIn) {
          this.alpha += 0.01;
          if (this.alpha >= 0.8) this.fadeIn = false;
        } else {
          this.alpha -= 0.005;
          if (this.alpha <= 0) this.reset();
        }
        if (this.x < 0) this.x = ambientCanvas.width;
        if (this.x > ambientCanvas.width) this.x = 0;
        if (this.y < 0) this.y = ambientCanvas.height;
        if (this.y > ambientCanvas.height) this.y = 0;
      }
      draw() {
        ambientCtx.beginPath();
        ambientCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ambientCtx.fillStyle = `rgba(255,255,255,${this.alpha})`;
        ambientCtx.fill();
      }
    }
    const ambientParticles = Array.from({ length: 120 }, () => new AmbientParticle());
    function animateAmbientParticles() {
      ambientCtx.clearRect(0, 0, ambientCanvas.width, ambientCanvas.height);
      ambientParticles.forEach(p => { p.update(); p.draw(); });
      requestAnimationFrame(animateAmbientParticles);
    }
    animateAmbientParticles();
  </script>
</body>
</html>
